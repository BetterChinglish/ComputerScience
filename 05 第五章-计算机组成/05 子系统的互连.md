# 子系统的互连



## CPU和存储器的链接 
> CPU 和 存储器 之间通常由称为**总线**的三组线路连接在一起  
> 数据总线  
> 地址总线  
> 控制总线  


1. 数据总线

> 由多根线组成，每一根线上每次传送1位的数据  
> 线的数量取决于计算机的大小  
> 如计算机的字是32位，那么就需要32根线的数据总线，以便在同一时刻能够同时传送32位的字

2. 地址总线  

> 允许访问存储器中的某个字  
> 其线数取决于存储空间的大小  
> 如果存储容量位2^n个字，那么地址总线一次需要传送n位的地址数据，需要n根线（之前的几章有提到过）

3. 控制总线

> 负责在中央处理器和内存之间传递信息  
> 线数取决于计算机所需要的控制命令的总数  
> 如果有2^m条控制指令，就需要m根控制总线

## I/O设备的连接

> I/O设备不能直接与连接CPU和内存的总线相连,他们的本质是几点、磁性或光学设备，而CPU和内存是电子设备，本质不同  
> 他们的操作速度要比CPU和内存慢很多，必须要有中介来处理这种差异  
> 这就要用到一种被称为**输出/输出控制器**或接口的器件连接到总线上  
> 每个输入/输出设备都有一个特定的**控制器**

** 控制器**
> 或说接口，清楚了输入/输出设备与CPU及内存在本质上的障碍  
> 控制器可以是串行或者并行的设备  
> 串行控制器只有一根数据线连接到设备上  
> 并行则有多根数据线连接到设备上，使得一次能同时传送多个位
> 有几种控制器至今还在使用，如今最常用的有SCSI、火线、USB和HDMI

1) SCSI

> **小型计算机系统接口**  
> 1984年为Macintosh计算机设计  
> 是一个8、16或32线的并行接口  
> 提供菊花链连接，连接链的两端都必须有终结器，且每个设备都必须要有唯一的地址（目标id）

2) 火线 

> IEEE标准1394规定的串行接口，俗称**火线**  
> 是一种高速的串行接口，数据采用数据包的形式传送，传输速度高达50MB/s，对于版本最新的数据线，这个速度可以翻一倍  
> 可以在一条菊花链或树形连接（只用一根线）上连接多达63个设备  
> 与SCSI相比，它不需要终结器

3) USB

> 通用串行总线控制器是一种可以和火线控制器相媲美的控制器  
> 串行控制器，用以连接与计算机项链的一些低速和高速设备  
> 多个设备可以被连接到一个USB控制器上，这个控制器也称为根集线器  
> USB-2允许多达127个设备组成树状拓扑结构连接到一个USB控制器上  
> 其中控制器作为树的根，集线器作为中间节点，设备作为末端节点  
> 控制器和其他集线器的不同之处在于控制器能感受到树种其他集线器的存在  
> 而集线器是被动的设备，他们制数简单地传送数据  
> ***  
> 设备可以不需要关闭计算权很容易的移除或连接到树中  
> 这称为热交换  
> 当集线器从系统移除时，与此集线器相连的所有设备和其他集线器也将被溢出

> 未完待补充
> USB2.0与USB3.0

4) HDMI
                                                     
> 高清晰度多媒体接口  
> 是现有视频模拟标准的数字化替代品  
> 可以用来从一个资源向另一个兼容的计算机显示器、视频投影仪、数字电视或数字音像设备传输视频数据和数字印象数据  
> 现有的多种HDMI标准电缆可用于传输包括标准、加强、高清晰以及3D画质的视频数据  
> 最多可达8频道的压缩或未压缩数字音频  
> 消费性电子控制（CEC）连接，且可用于以太网络数据连接


## 输入/输出设备的寻址

> CPU使用相同的总线在内存和输入/输出设备之间读写数据  
> 唯一不同的是指令  
> 如果指令涉及主存中的字，那么数据会在主存和CPU之间传送  
> 如果涉及输入/输出设备，那么数据会在输入输出设备和CPU之间传送  
> 两种方法用来对输入输出设备进行寻址： I/O独立寻址和I/O存储映射寻址  

1. I/O独立寻址

> 用来读/写内存的指令与用来读/写输入输出的指令是完全不同的  
> 有专门的指令完成对输入/输出设备的测试、控制以及读写操作  
> 每个输入/输出的设备都有自己的地址  
> 指令不同，使用输入/输出地址可以和内存地址重叠而不会产生混淆  
> 例如 使用读命令read 101 来从内存中读取字101，也可以使用输入命令Input 101 来从地址端口为101的输入/输出设备中读取数据，虽然都用到101，但是指令不同，故不会发生冲突


2. I/O存储器映射寻址

> CPU将输入/输出控制器中的每个寄存器都看作内存中的某个存储字  
> 也就是说，没有不同的指令来表示是从内存或是从输入/输出设备传送数据  
> 存储器映射的输入/输出的配置优点在于有一个较小的指令集，所有对内存的操作指令都同样适合于输入/输出设备  
> 缺点是： 输入/输出控制器占用了一部分内存地址


