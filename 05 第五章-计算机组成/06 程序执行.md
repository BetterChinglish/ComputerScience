# 5.6程序执行

> 如今通用计算机使用称为**程序**的一系列指令来处理数据  
> 通过执行程序，将输入数据转换成输出数据  
> 程序同数据都放在内存中  

## 5.6.1机器周期

> CPU利用重复的机器周期来执行程序中的指令  
> 一步一条，从开始到结束  
> 简化的周期包括三步：  
> 取指令  
> 译码  
> 执行 

1. 取指令

> 控制单元命令系统将吓一跳要执行的指令复制到CPU的指令寄存器中  
> 被复制的指令地址保存在程序计数器PC中  
> 复制完成后，程序计数器PC自动加1指向内存中的下一条指令 

2. 译码

> 机器周期第二阶段  
> 指令置于寄存器后，该指令将由控制单元负责译码 
> 指令译码的结果是产生一系列系统可以执行的二进制代码

3. 执行 

> 译码完成后，控制单元发送任务命令到CPU的某个部件  
> 如控制单元告知系统，让他从内存中加载数据项等等……  

## 5.6.2 输入/输出操作

> 计算机需要通过命令把数据从I/O设备传输到CPU和内存，但是输入/输出设备的运行速度比CPU慢得多，因此CPU的操作在某种程度上必须和输入/输出设备同步  
> 有三种方法被设计用于同步： 程序控制输入/输出、终端控制输入/输出、直接存储器存取（DMA）

1. 程序控制输入/输出

> CPU等待I/O设备  
> CPU和I/O设备之间的数据传输是通过程序中的指令实现的  
> 当CPU遇到一条I/O指令时，就停止工作等到数据传输完毕  
> CPU不时地查询I/O设备的状态  
> 没好继续等继续查询直到好为止  
> 好了则数据传到CPU  
> 缺点： 每一个单元数据被串数时，CPU都要浪费时间去查询I/O的状态  
> 注意：数据在输入操作后被传送到内存，在输出操作前则是从内存中取出

2. 中断控制输入/输出

> 首先CPU告知I/O设备即将开始传输  
> 然后CPU去做别的事情  
> 当传输完成后，I/O设备通知CPU，CPU从做别的事情中回来  
> 同样的，数据在输入操作后被传送到内存，在输出操作前则是从内存中取出 

3. 直接存储器存取（DMA）

> 用户在高速I/O设备间传输大量的数据块