# 主存储器

> 是计算机内的第二个子系统  
> 是存储单元的集合  
> 每个存储单元都有唯一的标识，称为地址  
> 数据以称为字的位组的形势在内存中传入和传出  
> 字可以是8位，16位，32位，甚至是64位（现在还在增长）  
> 如果字是8位，称为1字节
> 16位称为2字节……


## 地址空间

> 在存储器中存取每个字都需要由相应的标识符  
> 在硬件层次上，没给都是通过地址来标识的  
> 所有在存储器中标识的独立的地址单元的总数称为地址空间  
> 例如，一个64kb，字长为1字节的内存地址空间的范围为0~65535

**作为位模式的地址** 

> 由于计算机是以位模式存储数并进行运算，因此地址本身也是用位模式表示的  
> 如果一个内存是64k（2^16），字长为1字节，那么就需要16为的位模式来确定地址  
> 地址使用无符号整数表示，故起始为0，最后一个为65535  
> 如果一个计算机由n个字的存储空间，那就需要有log2 n位的无符号整数来确定一个存储单元  


**内存地址用无符号二进制整数定义**

## 存储器的类型

> 主要有两种类型的存储器：
> * RAM
> * ROM

1. RAM

随机存取存储器
> 可以使用存储单元地址来随机存取一个数据项，而不需要存取位于他前面的所有数据项  
> 易失性  
> 当系统断电后，信息将丢失。

1) SRAM
> 静态RAM  
> 使用传统的触发器门电路来保存数据  
> 这些吗保持状态，通电的时候数据始终存在，无需刷新   
> SRAM速度极快，但是价格昂贵

2) DRAM
> 动态RAM  
> 使用电容器  
> 如果电容器充电，则此时的状态是1，如果放电则是0  
> 电容器会随时间而漏掉一部分电，使用内存单元需要周期性地刷新  
> DRAM比较慢，但是比较便宜

2. ROM

> 只读存储器  
> 其内容是由制造商写进去的  
> 只能读不能写  
> 有**非易失性**  
> 即切断电源后，数据也不会小时  
> 通常用于存储那些关机后也不能丢失的程序或数据，如bios

3. PFROM

> 可编程只读存储器  
> 发货时是空白的，借助一些特殊的设备可以将程序存储在上面  
> 当程序被存储后，就会像ROM一样不能够重写  
> 也就是说，计算机使用者可以用它来存储一些特定的程序

4. EPROM

> 可擦除可编程只读存储器  
> 用户可以对其进行编程，但是得用一种可以发出紫外光的特殊仪器对其擦写。  
> EPROM存储器需要拆下来擦除再重新安装


5. EEPROM

> 电可擦除可编程只读存储器  
> 对他的编程和擦除用电子脉冲即可，无需从计算机上拆下来

## 存储器的层次结构

> 计算机用户需要许多存储器，尤其是速度快且价格低廉的存储器  
> 但是存取速度快的存储器通常都不便宜  
> 因此需要寻找一种折中的方法，解决的办法是采用存储器的层次结构  
> * 当对速度要求很苛刻时可以使用少量高速存储器，如CPU的寄存器就是这种存储器  
> * 用适量的中苏存储器来存储经常需要访问的数据，如接下来要讨论的高速缓冲处理器  
> * 用大量的低俗存储器存储那些不经常访问的数据。如主存



## 高速缓冲存储器

> 高速缓冲存储器的存取速度要比主存快  
> 但是比CPU及其内部的寄存器要慢  
> 通常容量较小，常被置于CPU和主存之间

> 高速缓冲存储器在任何时间都含有主存中一部分内容的副本  
> CPU存取主存中的一个字时，步骤如下：  
> 1) CPU检查高速缓冲存储器
> 2) 存取的字若存在，CPU将其赋值；如果不存在，CPU从主存中复制一份从需要读取的字开始的数据块，该数据块将覆盖高速缓冲存储器中的内容  
> 3) CPU存取高速缓冲器并复制该字  
> ***
> 这种方式将提高运算的速度  
> 如果字在高速缓冲存储器中，就立刻存取它；如果不存在，字和整个数据块就会被复制到高速缓冲存储器中，因为CPU很有可能在下次存取中需要存取上次存取的第一个字后的后续字，所以高速缓冲存储器可以大大提高处理的速度  
> ***
> 为什么高速缓冲存储器尽管存储量小但效率很高？  
> 由于80-20规则，即据观察，通常计算机花费80%的时间来读取20%的内容  
> 而高速缓冲存储器凭借其高速，可以存储着20%的数据而使存取至少快80%



